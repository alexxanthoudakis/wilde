<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" data-template="templates:surround"
    data-template-with="templates/page.html" data-template-at="content">
    <div class="row">
        <div class="page-header">
            <h1>Comparison</h1>
        </div>
        <p>This page compares two reports at the document level. The column on the left shows the
            first report and the column in the middle shows the second. The column on the right
            highlights any differences between the two documents. Pink shows differences in the
            first report and purple in the second report.</p>
        <br/>
    </div>

    <div class="row">
        <div data-template="app:compare-documents"/>
    </div>

    <script type="text/javascript"> // <![CDATA[
        function normalize(string) {
            var lower = string.toLowerCase();
            var lbs = lower.replace(/(\r\n|\n|\r)/gm, " ");
            var clean = lbs.replace(/\s+/g, ' ');
            return clean;
        }

        $(document).ready(function(){
            var a = normalize($("#doc_a").html());
            var b = normalize($("#doc_b").html());
            
            var markup = diff(a,b);
            $("#diff").html(markup);
        });
    // ]]>
    </script>
    <script type="text/javascript" src="resources/lib/js-url/url.min.js"/>
    <script type="text/javascript" src="resources/lib/htmldiff/dist/htmldiff.js"/>
</div>
